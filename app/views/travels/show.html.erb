

<p id="notice"><%= notice %></p>

<div class="large-12 columns panel-landing-middle" style="z-index: 10">
  <div class="small-12 large-12 columns"><h1>Dresser la liste des étapes selon chemin optimal</h1></div>
    
  <div class="small-12 large-12 columns"><%= @travel.stages.first.address %><%= @chemin_optimal.flatten %></div>

  <div class="small-12 large-12 columns"><%= @meteo %></div>

  
</div>


<!-- 
- dresser la liste des étapes selon chemin optimal et reverse sur chmein optimal 
- afficher données météo de chaque étape pour chacun des chemins
- produire un graph mettant en forme ces données meteos. 1 graph/chemin puis tout sur un graph.
- indiquer le meilleur trajet climatique selon Copilot (sum notation)
- ajouter info bulle
- intégrer changement dynamique du graph dès que changement de position d'une étape.
-->


    <div id="map" style='position: absolute; left: 0px; top: 0px; overflow: hidden; width: 100%; height: 100%; z-index: 0;'></div>
  <%# render 'map_script' %>
 

<div class="small-3 large-3 small-offset-9 large-offset-9 columns panel" style="margin-top = -70px;">
  <div class="small-block-grid-12">
  <h1><%= @travel.name %><span class="handle"><%= link_to '[Edit]', edit_travel_path(@travel) %></span></h1>
  </div>

  <div class="row">
    <div class="small-2 columns">
        <label><i class="fi-torsos picto" style="font-size: 24px;"></i></label>
    </div>
    <div class="small-3 small-pull-7 columns">
      <select id="right-label">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
      </select>
    </div>
  </div>
  <table>
    <thead>
      <tr>
        <th>Stop</th>
        <th>Date de départ</th>
<!--         <th>Duration</th>
 -->      </tr>
    </thead>
    <tr>
      <%= render '/stages/stages' %>

    </tr>
  </table>

<a href="#" data-reveal-id="myModal" class="button small radius">Add a stop</a>
<div id="myModal" class="reveal-modal" data-reveal>
  <%= render 'stages/new_stage_form' %>
  <a class="close-reveal-modal">&#215;</a>
</div>


<!--   <%= button_to "new stage", new_travel_stage_path(@travel, @stage), id: "add", method: :get, remote: true %>
 -->  <div class="row">
    <div class="small-4 columns">
      <%= @travel.stages.count %>
      <i class="fi-marker" style="font-size: 24px;"></i>
    </div>
    
    <div class="small-4 columns">
      <i class="fi-calendar" style="font-size: 24px;"></i>
      <%= @travel.duration %>d
    </div>
    <div class="small-4 columns">
      <i class="fi-dollar-bill" style="font-size: 24px;"></i>
      <%# @travel.travel_budget %>€
    </div>
    <!-- <div class="small-3 columns end">
      <i class="fi-share" style="font-size: 24px;"></i>
      <%#  number_with_delimiter(@travel.distance, locale: :fr) %>km
    </div> -->
  </div>


  <div><%= button_to 'Save my trip', new_user_registration_path, method: :get %></div>
  <div id="meteo" style="width:100%; height:400px;z-index: 20"></div>
  <%= render 'chart_script' %>
  <div class="small-12 large-12 columns"><h1>Dresser la liste des étapes selon chemin optimal</h1></div>
</div>
